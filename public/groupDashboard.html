
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pictures</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://use.fontawesome.com/4b53ea2f0f.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Alegreya|Alegreya+Sans|Lato&display=swap" rel="stylesheet">
</head>
<body>
    <style>
        body {
            height: 100%;
            color: #100048;
            background-color: #08144b;
            font-family: 'Lato', sans-serif;
        }

        h1 {
            font-family: 'Alegreya', serif;
        }
        
        .thumbnail-size {
            width: 100%;
            height: 15vw;
            object-fit: cover;
        }

        a:hover {
            text-decoration: none;
        }
        
        .profilePictureLink {
            cursor: pointer;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;

        }
        
        .profilePictureLink2 {
            cursor: pointer;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
        }
    </style>
    
    <script>
        //===========akanksha=====
        function mQuotes(){
            $.ajax({
                url: "https://type.fit/api/quotes",
                method: "GET"
            }).then(function(response){
            var motQuotes = JSON.parse(response)
            console.log(motQuotes);

            var quote = Math.floor(Math.random()*motQuotes.length);

            //console.log("Random quote: "+JSON.stringify(motQuotes[quote]));
        
            $("#quotes").text(motQuotes[quote].text);
        
            })
        }  

        $(document).ready( async function(){
             mQuotes();

            //==========sara======

            const groupId = location.hash.substr(1);
            const myMembersList = await $.get(`/api/membersList/${groupId}`);
            console.log(myMembersList);
            $('#groupName').html(`${myMembersList[0].group_name}`);
            $('#membersList').html('');
            myMembersList.forEach(function( group ){

                $('#membersList').append(`<div class="userImg col-2">
                    <img src="${group.user_img}" alt="" class="profilePictureLink" style="width: 100px;" onClick="showMemberProfile('${group.id}')">
                </div>`)     
            })
            const myTop3List = await $.get(`/api/top3List/${groupId}`);
            console.log(myTop3List);
            $('#top3List').html('');
            myTop3List.forEach( function( top3 ){

                $('#top3List').append(`
                <div class="d-flex justify-content-around card-body">
                    <img src="${top3.user_img}" alt="" class="profilePictureLink2">
                    <h6 class="mt-4">${top3.my_name}</h6>
                    <h6 class="mt-4">Weight: ${top3.my_weight}</h6>
                </div>`)
            })

            //============ saraaaaa don't delete below=====//
            //Norma's Code Added //
            const fetchProfilePic = await $.get("/api/profilepic");
            console.log("Getting the profile pics!!!!")
            console.log(fetchProfilePic);
            for ( let i=1; i<fetchProfilePic.length; i++){
                $("#profileimg").append(
                    `<div class="userImg col-2">
                        <a href="individual.html/${i}" class="hoverProfile"><img src="${fetchProfilePic[i].user_img}" alt="" class="profilePicture" style="width: 100px;"></a>
                    </div>
                    `
                );
            }
            showInfo();

        })


            //--=================Norma Code====================//
        async function showInfo(){
            const fetchPosts = await $.get("/api/getposts");
            console.log("Getting the posts from server!!!!") 
            console.log(fetchPosts);
            $("#userpostid").empty();
            let arrLength = fetchPosts.length-1;
            for ( let i = arrLength; i >= 0; i--){
                $("#userpostid").append(
                    `<section id="${i+1}" class="userPost container mt-4 card">
                    <div class="progressSection card-body">
                        <div class="input-group mb-3 ">
                            <div class="form-control d-flex align-items-start card-body">
                                <div class="userImg col-2">
                                    <img src="${fetchPosts[i].user_img}" alt="" class="profilePicture" style="width: 100px;">
                                </div>
                                <div class="text-left col-10">
                                    <h3>${fetchPosts[i].my_name}</h3>
                                    <p class="text-left">${fetchPosts[i].info}</p>
                                    <div class="">${fetchPosts[i].creation_time}</div>  
                                </div>
                            </div>
                        </div>
                        <ul class="nav justify-content-start">
                            <li class="nav-item">
                                <button><i onclick="thumbsupFunc(${i+1})" id="thumbsupid${i+1}" class="fa fa-thumbs-o-up fa-lg" aria-hidden="true"></i></button>
                                <span id="number${i+1}" class="pl-2"></span>
                            </li>
                        </ul>
                    </div>
                </section>`
                )
            } 
        }


        async function thumbsupFunc(idx){
            const thumbsUp = await $.get(`/api/thumbsup/${idx}`);   
            console.log(thumbsUp);
            console.log(thumbsUp[0].thumbs_up); 
            // // event.preventDefault();
            // console.log(thumbsUp);
            $(`#number${idx}`).html(thumbsUp[0].thumbs_up);
        }


            //================sara===========

        function showMemberProfile(id){
            console.log('loading profile of ' + id);
            location.href = '/individual.html#'+ id;
        }

            //================sara===========

        
    </script>
    <main role="main">
        <section class="jumbotron text-center container-fluid">
            <div class="text-center mb-5">
                <h1 id="groupName">Group Name</h1>
            </div>
            <div class="d-flex justify-content-around">
                <img src="assets/PossibleGlumAcouchi-small.gif" style="width: 30%;" alt="Flowers in Chania" width="">
                <div class="col-4">
                    <h3>Total point: 523</h3>
                    <h5>Top 3</h5>
                    <div class="card-body" id="top3List">
                    </div>
                </div>
            </div>
        </section>
        <section class="container card">
            <div class="card-body">
                <div class="row" id="quotes" ></div>
            </div>
        </section>
        <section class="members container card">
            <div class="card-body d-flex justify-content-around" id="membersList">
                <div class="userImg col-2">
                    <img src="assets/download.png" alt="" class="profilePictureLink" style="width: 100px;" >
                </div>
                <div class="userImg col-2">
                    <a href="#" class="hoverProfile"><img src="assets/download.png" alt="" class="profilePictureLink" style="width: 100px;"></a>
                </div>
                <div class="userImg col-2">
                    <a href="#" class="hoverProfile"><img src="assets/download.png" alt="" class="profilePictureLink" style="width: 100px;"></a>
                </div>
                <div class="userImg col-2">
                    <a href="#" class="hoverProfile"><img src="assets/download.png" alt="" class="profilePictureLink" style="width: 100px;"></a>
                </div>
                <div class="userImg col-2">
                    <a href="#" class="hoverProfile"><img src="assets/download.png" alt="" class="profilePictureLink" style="width: 100px;"></a>
                </div>
                <div class="userImg col-2">
                    <a href="#" class="hoverProfile"><img src="assets/download.png" alt="" class="profilePictureLink" style="width: 100px;"></a>
                </div>
            </div>
        </section>

        <section class="postSome container card">
            <div class="card-body">
                <h4>Post Something</h4>
                <div class="input-group mb-3">
                    <input type="text" class="form-control" placeholder="" aria-label="Recipient's username" aria-describedby="basic-addon2">
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" type="button">Button</button>
                    </div>
                </div>
            </div>
        </section>
        <section class="userPost container mt-4 card">
            <div class="progressSection card-body">
                <div class="input-group mb-3 ">
                    <div class="form-control d-flex align-items-start card-body">
                        <div class="userImg col-2">
                            <img src="assets/download.png" alt="" class="profilePicture" style="width: 100px;">
                        </div>
                        <div class="text-left col-10">
                            <h3>Jon Doe </h3>
                            <p class="text-left">35 min ago</p>
                            <h6 class="text-left">completed this task</h6>
                            <div class="">Lost 20lb</div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 100%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <div class="">is almost there</div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped bg-warning" role="progressbar" style="width: 80%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <ul class="nav justify-content-start">
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fa fa-thumbs-o-up fa-lg" aria-hidden="true"></i></a>
                    </li>
                </ul>
            </div>
        </section>
        <section class="userPost container mt-4 card">
            <div class="progressSection card-body">
                <div class="input-group mb-3 ">
                    <div class="form-control d-flex align-items-start card-body">
                        <div class="userImg col-2">
                            <img src="assets/download.png" alt="" class="profilePicture" style="width: 100px;">
                        </div>
                        <div class="text-left col-10">
                            <h3>Nancy Stewart</h3>
                            <p class="text-left">completed this task</p>
                            <div class="">Lost 30lb</div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped bg-danger" role="progressbar" style="width: 40%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <div class="">is almost there</div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 90%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <ul class="nav justify-content-start">
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fa fa-thumbs-o-up fa-lg" aria-hidden="true"></i></a>
                    </li>
                </ul>
            </div>
        </section>
    </main>
    
</body>
</html>

